"use strict";angular.module("odoo",[]);
"use strict";angular.module("odoo").provider("jsonRpc",function(){this.odooRpc={uniq_id_counter:0,callBackDeadSession:function(){},callBackError:function(){},context:{}},this.$get=["$http","$cookies","$rootScope","$q",function(e,t,o,n){var s=this.odooRpc;return s.sendRequest=function(r,a){var i=n.defer();a.session_id=t.session_id,s.uniq_id_counter+=1;var c={jsonrpc:"2.0",method:"call",params:a},d={method:"POST",url:r,data:JSON.stringify(c),headers:{"Content-Type":"application/json"},id:"r"+s.uniq_id_counter};return e(d).success(function(n){if("undefined"!=typeof n.error){var s=n.error;if(300===s.code&&s.data&&"client_exception"==s.data.type&&s.data.debug.match("SessionExpiredException"))delete t.session_id,i.reject("session_expired");else{var r=(""+s.data.fault_code).split("\n")[0].split(" -- ");r.length>1&&(s.type=r.shift(),s.data.fault_code=s.data.fault_code.substr(s.type.length+4));var a=void 0,c=void 0;200===s.code&&s.type?(c=s.type,a=s.data.fault_code.replace(/\n/g,"<br />")):(c=s.message,a=s.data.debug.replace(/\n/g,"<br />")),o.modal({title:c,show:!0,content:a,html:!0}),i.reject({title:c,message:a,fullTrace:s})}}else{var d=n.result;"ir.actions.act_proxy"===d.type&&angular.forEach(d.action_list,function(t){var o={method:"POST",url:t.url,data:JSON.stringify(t.params),headers:{"Content-Type":"application/json"}};e(o)}),i.resolve(d)}}),i.promise},s.login=function(e,o,n){var r=$.Deferred(),a={db:e,login:o,password:n};return s.sendRequest("/web/session/authenticate",a).then(function(e){e.uid?(t.session_id=e.session_id,r.resolve(e),console.log(e),s.context=e.user_context):r.reject(e)},function(){r.reject(error)}),r.promise()},s.searchRead=function(e,t,o){var n={model:e,domain:t,fields:o};return s.sendRequest("/web/dataset/search_read",n)},s.call=function(e,t,o,n){n||(n={}),n.context?n.context.extend(OdooRpc.context):n.context=s.context;var r={model:e,method:t,args:o,kwargs:n};return s.sendRequest("/web/dataset/call_kw",r)},s.get_session_info=function(){return s.sendRequest("/web/session/get_session_info",{})},s}]});
angular.module("odoo").run(["$templateCache",function(t){t.put("app/main/main.html",'<div class="container"><input type="text" ng-model="login"> <input type="text" ng-model="password"> <button ng-click="loginFn()">Login</button> <input type="text" ng-model="db"></div>')}]);